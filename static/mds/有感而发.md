# 企业内网GIS平台搭建有感

标签（空格分隔）： 未分类

---
我所参与的几个项目都是和通信行业相关，基本上每个项目都会有GIS平台能力的需求，像百度地图那样，在上面打点呈现各种业务，比如查看基站分布、计算覆盖范围、渲染性能指标等等。但内网GIS平台顾名思义就是不能联网，只提供企业内部使用的那么一个平台，企业自己有掌控权。于是乎还不能直接使用互联网上的地图服务。

我进公司之前，项目中已经就有一套GIS平台了。但准确说这不叫自己的GIS平台，把这个方案先记为A吧。方案A的思路就是在内网搭一个能访问互联网的服务器，用来做中转，然后使用Google地图提供的服务。可是Google地图会限制访问次数，同样的其他互联网地图服务都有或多或少的限制。于是我们当时写了个工具用于把地图每个格子图片缓存到本地，每次访问地图时先读缓存，这样就要求我们使用前把所有的图片都缓存起来才行，于是大家换着IP把地图先扒个遍，很黄很暴力。但这个工作很难顾全，你想全国那么多省份，还有不同比例的地图图片完全又不一样，因此使用中经常会发现地图中空出了一块，那就是漏掉的没扒过来的图片。方案A没使用多久，卒！

使用方案A的同时，开始方案B计划。这次就靠谱多了，首先我的GIS平台算是可控，这个方案服务器采用ArcGIS服务器、地图数据从淘宝淘的，前端也是ArcGIS。因为数据从淘宝淘的，精度不行，但对企业应用来说，足够了，毕竟便宜啊~。这个方案运行良好，本以为就稳定下来了，但是方案B有个根本性的问题：ArcGIS服务器是免(po)费(jie)的。招投标的时候只能~嘘~不能说，本来这几十万的成本压缩对于招标还是很大竞争力的，假如竞争对手知晓这个了，告诉甲方，这标基本得废。于是乎，我们进行了方案C，这也是头交给我的任务，调研C的可行性。

方案C的选型是尽可能的使用开源产品，对于主要以JAVA为主的团队来说，我们选择了[GeoServer][1]这款产品作为GIS服务器。GIS数据还是从神通广大的淘宝上购买，使用[uDig][2]来配置地图样式。从13年开始跑到现在基本上效率还行，毕竟不是互联网地图服务应用，没有那么大的访问量。一台8c 12g的服务器就搞定。现在说说方案C的问题：
>* 在linux系统部署时，时有乱码问题，一般设下字符集就能解决，但还有一种情况就是linux系统缺少中文字符集时需要安装中文字符才能解决。
>* 配置地图图层时，最好把购买的地图数据按图层顺序进行排序，用数字加前缀比如01-region等，因为GeoServer会自动对图层进行排序，添加一次图层又会刷新一下备选图层，会很烦人的。
>* 一定要注意备份，配置图层和样式真是一件体力活。

如果公司不缺钱，同时GIS访问量大，还是极力推荐强大的ArcGis服务器，自带了很多牛逼的功能，性能也比GeoServer强大许多，还有专业的公司做咨询。

如果没有高并发高访问量需求，GeoServer够用。

[1]:http://geoserver.org/
[2]:http://udig.refractions.net/







